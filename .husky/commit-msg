#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# run commitlint; capture its exit code
npx --no -- commitlint --edit "$1"
status=$?

if [ $status -ne 0 ]; then
  echo ""
  echo "ğŸš« ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤!"
  echo ""
  echo "ì»¤ë°‹ ë©”ì‹œì§€ëŠ” Conventional Commits í˜•ì‹ì„ ë”°ë¼ì£¼ì„¸ìš”:"
  echo ""
  echo "  <type>[scope]: <description>"
  echo ""
  echo "  build:    ë¹Œë“œ ì‹œìŠ¤í…œ ë³€ê²½ (ì˜ˆ: Gradle, npm)"
  echo "  chore:    ê¸°íƒ€ ì¡ì¼(ë¬¸ì„œÂ·ì„¤ì • ë³€ê²½ ë“±)"
  echo "  ci:       CI ì„¤ì •Â·ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •"
  echo "  docs:     ë¬¸ì„œ ë³€ê²½"
  echo "  feat:     ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€"
  echo "  fix:      ë²„ê·¸ ìˆ˜ì •"
  echo "  perf:     ì„±ëŠ¥ ê°œì„ "
  echo "  refactor: ì½”ë“œ ë¦¬íŒ©í† ë§(ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ)"
  echo "  revert:   ì´ì „ ì»¤ë°‹ ë˜ëŒë¦¬ê¸°"
  echo "  style:    ì½”ë“œ í¬ë§·Â·ìŠ¤íƒ€ì¼(ê¸°ëŠ¥ ë³€ê²½ ì•„ë‹˜)"
  echo "  test:     í…ŒìŠ¤íŠ¸ ì¶”ê°€Â·ìˆ˜ì •"
  echo ""
  echo "ì˜ˆì‹œ) feat(auth): ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€"
  echo ""
  exit $status
fi

echo "âœ… Valid commit message. Thanks!"
